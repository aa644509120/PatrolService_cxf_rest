<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
    <class name="com.meiah.entity.sys.SysResource" table="sys_resource"  >
        <id name="id" type="java.lang.Long">
            <column name="id" />
            <generator class="native" />
        </id>
        <property name="pid" type="java.lang.Integer">
            <column name="pid" />
        </property>
        <property name="code" type="java.lang.String">
            <column name="code" length="50" />
        </property>
        <property name="name" type="java.lang.String">
            <column name="name" length="50" />
        </property>
        <property name="level" type="java.lang.Integer">
            <column name="level" />
        </property>
        <property name="url" type="java.lang.String">
            <column name="url" length="200" />
        </property>
        <property name="icon" type="java.lang.String">
            <column name="icon" length="200" />
        </property>
        <property name="enable" type="java.lang.Integer">
            <column name="enable" />
        </property>
        <property name="weight" type="java.lang.Integer">
            <column name="weight" />
        </property>
        <property name="isguide" type="java.lang.Byte">
            <column name="isguide" />
        </property>
        <property name="foldtype" type="java.lang.Integer">
            <column name="foldtype" />
        </property>
        <property name="type" type="java.lang.Integer">
            <column name="type" />
        </property>
        <property name="uniqueCode" type="java.lang.String">
            <column name="uniqueCode" length="200" />
        </property>
        <property name="createtime" type="java.util.Date">
            <column name="createtime" length="23" />
        </property>
        <property name="portalConfig" type="java.lang.Byte">
            <column name="portalConfig" />
        </property>
        <property name="positionType" type="java.lang.Integer">
            <column name="positionType" />
        </property>
        <property name="requireAuth" type="java.lang.Integer">
            <column name="requireAuth" />
        </property>
        <property name="comeFrom" type="java.lang.String">
            <column name="comeFrom" length="50" />
        </property>
         <property name="typeId" type="java.lang.Long">
            <column name="typeId" />
        </property>
    </class>
    
    <sql-query name="SysResource.getUserResources">
		<return alias="t" class="com.meiah.entity.sys.SysResource"/>
		<![CDATA[
			SELECT * FROM sys_resource sr
			WHERE ((requireAuth = 1 and comeFrom = '微博巡查') or comeFrom != '微博巡查') and
			 [enable] = 1
			#if($pid)
				AND sr.pid = $pid
			#end
			#if($level)
				AND sr.[level] = $level
			#end
			#if($type)
				AND sr.[type] = $type
			#end
			order by weight
		]]>
	</sql-query>
	
	<sql-query name="SysResource.getSystem">
		<return-scalar column="system" type="java.lang.String" />
    	<![CDATA[
    		select distinct(comeFrom) as system from  sys_resource
    	]]>
	</sql-query>
	
</hibernate-mapping>
